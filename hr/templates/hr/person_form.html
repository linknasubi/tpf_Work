

{% load static %}
{% load widget_tweaks %}


{% block content %}
<html lang="pt-br">
<head>
    <meta charset="UTF-8">

    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
            <link rel="stylesheet" href="{% static 'css/style.css' %}">

</head>

<body>
</nav>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %}</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">

</head>
<body>
        <nav class="navbar navbar-expand-lg  navbar-dark" style="background-color: #03045E">
            <a class="navbar-brand" href="#">
                <img width="130px"  src="static/img/TPF-ENGENHARIA-1.jpg" alt="Logotipo TPF Engenharia">
            </a>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">

                    
                    <span</span>
                    <span ><a  class="hello-msg" href="{% url 'logout' %}">Logout</a></span>
                </ul>
            </div>
        </nav>
        {% if user.is_authenticated %}

        {% endif %}

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
            integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="{% static 'js/scripts.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <scripts src="tail.select-full.min.js"></scripts>
</body>

</nav>
  </body>

</body>

<style>
    label {
        padding: 8px;
    }
</style>
<br>
<div class="container">
    <div class="jumbotron">
        <hr class="my-6">
        <div class="container">
            <p>Campo de busca</p>
        </div>

        <div style="border: outset 5px grey;">

  <form method="get" action="/home/" id="personForm" data-cities-url="{% url 'ajax_load_cities' %}" novalidate>
    {% csrf_token %}
    <table>
      {{ form.as_table }}
    </table>
    
    <button type="submit">Save</button>
    <a href="{% url 'person_changelist' %}">Nevermind</a>
    
  </form>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script>
    $("#id_cad_empresa").change(function () {
      var url = $("#personForm").attr("data-cities-url");  // get the url of the `load_cities` view
      var cad_empresaId = $(this).val();  // get the selected country ID from the HTML input

      $.ajax({                       // initialize an AJAX request
        url: '{% url 'ajax_load_cities' %}',                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'cad_empresa': cad_empresaId       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
          $("#id_cad_servico").html(data);  // replace the contents of the city input with the data that came from the server
        }
      });

    });
    // this one is for fetching vanue data
    $("#id_cad_servico").change(function () { //django-model-form created this id
      var url = $("#personForm").attr("data-cities-url");  // get the url of the `load_cities` view
      var cad_servicoId = $(this).val();  // get the selected country ID from the HTML input

      $.ajax({                       // initialize an AJAX request
        url: '{% url 'ajax_load_vanues' %}',                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/) person_form.html template has this url var
        data: {
          'cad_servico': cad_servicoId       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
          $("#id_cad_veiculo").html(data);  // replace the contents of the city input with the data that came from the server
        } 
      });

      $.ajax({                       // initialize an AJAX request
        url: '{% url 'ajax_load_data' %}',                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/) person_form.html template has this url var
        data: {
          'cad_servico': cad_veiculoId       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
          $("#id_cad_veiculo").html(data);  // replace the contents of the city input with the data that came from the server
        } 
      });


    });
  </script>
  </div>
</div>
</div>
</body>

{% endblock %}